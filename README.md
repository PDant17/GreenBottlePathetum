# GreenBottlePathetum

GreenBottlePathetum is an AI-driven clustering system developed for the optimization of delivery services in a green logistics context. This project aims to support AquaPure's GreenBottle platform by utilizing clustering algorithms to efficiently assign delivery orders to couriers, optimize routes, and minimize operational costs.

## Features

- **Order Clustering**: Groups delivery orders into optimal clusters for assignment to couriers.
- **Route Optimization**: Suggests the best delivery routes for each courier.
- **Courier Load Balancing**: Ensures a balanced workload among couriers.
- **Scalability**: Efficiently handles various sizes of datasets and supports different geographical areas.

## Background and Goals

The platform GreenBottle, owned by AquaPure, specializes in delivering beverages in glass bottles using electric vehicles. This project leverages artificial intelligence to:
- Group orders optimally among available couriers.
- Determine the best routes for couriers to follow.
- Calculate the ideal number of couriers required to fulfill incoming orders, even if this exceeds the available workforce.

This clustering approach addresses the problem of categorizing orders and mapping optimal delivery routes, considering both efficiency and environmental sustainability.

## Table of Contents

* [Installation](#installation)
* [Project Structure](#project-structure)
* [Testing](#testing)
* [Generating Results](#generating-results)
* [Visualizing Results](#visualizing-results)
* [Customization](#customization)
* [License](#license)

---

## Installation

Before running any part of the project, ensure you have Python installed. It is recommended to use a virtual environment.

```bash
git clone https://github.com/Boh0263/GreenBottlePathetum.git
cd GreenBottlePathetum
python -m venv venv
# On Windows:
venv\Scripts\activate
# On macOS/Linux:
source venv/bin/activate
pip install -r requirements.txt
```

This will install all dependencies defined in `requirements.txt`.

---

## Project Structure

```
GreenBottlePathetum/
├── Testing/
│   ├── main.py                         # Main execution script (core assignment logic)
│   ├── main_testing.py                 # Testing algorithm behavior
│   ├── visualize_results.py            # Visualization script
│   ├── Clustering/
│   │   ├── Algoritmi/
│   │   │   └── KMEANS.py               # KMeans clustering logic
│   │   └── PathetumEnviroment.py      # Environment for clustering context
│   ├── Dataset/
│   │   └── iteration_dataframe_parser.py # CSV iteration parser
│   └── Data/
│       └── hand_picked_points.csv     # Input points used for clustering
│
│   
├── RESULTS_PLOT/                             # Output files generated by clustering runs
├── requirements.txt                    # Python dependencies
└── README.md                           # Project documentation
```

---

## Testing

This module tests the clustering and assignment behavior.

### Run Testing Script

```bash
cd Testing
python main_testing.py
```

This runs predefined simulations to evaluate the assignment logic and debug environment.

---

## Generating Results

This is the core process that assigns clusters of orders to employees.

### Run Script

Make sure you are located in the Testing folder directory:

```bash
cd Testing
python main.py
```

1. Loads the iteration data from `Testing/Data/hand_picked_points.csv`
2. Performs clustering using KMeans.
3. Recursively assigns clusters to employees.
4. Saves results to `Output/Context_Iteration_X/`.

Assignment files are named:

```
Employee_<EmployeeID>_Cluster_<ClusterPath>.csv
```

### Required Data Format

The input CSV file (`hand_picked_points.csv`) must contain at least two columns:

```
x,y
12.5,47.1
8.9,33.3
...
```

Make sure this file exists in `Testing/Data/`.

---

## Visualizing Results

To graphically view cluster assignments:

```bash
cd Visualization
python visualize_results.py
```

This will display scatter plots and other visual analytics of the assignments saved in `RESULTS_PLOT/`.

---

## Customization

### Global Parameters

You can modify the following constants in `Testing/main.py`:

```python
MIN_CLUSTER_SIZE = 10
WIGGLE_ROOM_PERCENTAGE = 0.35
MAX_RECURSION_DEPTH = 10
```

* `MIN_CLUSTER_SIZE`: Prevents splitting of small clusters.
* `WIGGLE_ROOM_PERCENTAGE`: Allows an employee to take up to X% more work than their base capacity.
* `MAX_RECURSION_DEPTH`: Controls how many times an oversized cluster can be split.

### Employees

Employee capacity and identity are defined in `Testing/main.py` as:

```python
base_employees = [
    {'id': 'E1', 'capacity': 40},
    {'id': 'E2', 'capacity': 45},
    # ... more employees
]
```

Each dictionary must follow this structure:

* `id`: Unique employee identifier (string).
* `capacity`: Base number of tasks the employee can handle (integer).

**Important**: Do not change the field names. The format must remain the same for the script to function.

---

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.
